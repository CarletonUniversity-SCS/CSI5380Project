<!DOCTYPE HTML>
<html>
<head>
<title>Online CD Store</title>
<link href="css/bootstrap.css" rel='stylesheet' type='text/css' />
<!-- jQuery (necessary JavaScript plugins) -->
<script type='text/javascript' src="js/jquery-2.1.3.js"></script>
<script type='text/javascript' src="js/jquery-ui.min.js"></script>
<script type="text/javascript" src="js/jquery.cookie.js"></script>
<script type="text/javascript"  src="js/getUrlParam.js"></script>
<!-- Custom Theme files -->
<link href="css/style.css" rel='stylesheet' type='text/css' />
<!-- Custom Theme files -->
<!--//theme-style-->
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<!-- start menu -->
<link href="css/megamenu.css" rel="stylesheet" type="text/css" media="all" />
<script src="js/menu_jquery.js"></script>
<!-- ajax+jquery -->
<script>
$(document).ready(function(){ 
	var address="localhost:8443";
	var menu=UrlParm.parm("menu");
	var content=UrlParm.parm("content");
	var key=UrlParm.parm("key");
	var mtitle=UrlParm.parm("title");
	//take diffrent variables into the same function and get personality result
	var _json = jQuery.param({ "menu": menu,"content":content,"key":key});
	var _json1 = jQuery.param({ "menu": menu,"content":content,"key":"popular"});
	var _json2 = jQuery.param({ "menu": menu,"content":content,"key":"redate"});
	var _json3 = jQuery.param({ "menu": menu,"content":content,"key":"discount"});
	var _json4 = jQuery.param({ "menu": menu,"content":content,"key":"price"});
	//maintain session
	var request = $.ajax({  
        url: "https://"+address+"/CSI5380/keepsession.do",  
        type: "POST",  
        async: false,
        dataType: "json",  
        cache: false,  
        success: function (result, textStatus) {
        	while(result!=null){
        	$(".login").remove();
        	var accountinfo="<div class='accountinfo'><span>Welcome back, <a class='fisrtname' style='text-transform: capitalize'>"+result.account.fname+" !</a></span></div>";
        	$(".log").append(accountinfo);
        	break;
        	}
        },  
        error: function (XMLHttpRequest, textStatus, errorThrown) {
        	alert(errorThrown); }  
    });
	
	 //create cookie store cart items and show quantity and price of the chosen items
	if ($.cookie('cart')!=null){
		var cj=$.cookie('cart');
		var cjson= jQuery.param({"cjson": cj});
		var request3 = $.ajax({
	        url: "https://"+address+"/CSI5380/cookies.do",  
	        type: "POST",  
	        async: false,
	        data:cjson,
	        dataType: "json",  
	        cache: false,  
	        success: function (result, textStatus) {
	        	$("#simpleCart_total").text("$"+result.totalprice);
	        	$("#simpleCart_quantity").text(result.quantity);
	        	
	        },  
	        error: function (XMLHttpRequest, textStatus, errorThrown) {
	        	alert(errorThrown); }  
	    });
		
	}else{
		$.cookie("cart", "", { expires: 7 });
		$("#simpleCart_total").text("$0.0");
    	$("#simpleCart_quantity").text(0);
		
	}
	 
	//view shopping cart
	$("a[name='checkout']").click(function(){
    	
		if($.cookie('cart')!="" && $.cookie('cart')!=null){
			window.location.href="checkout.html";
		}else{
			alert("You Do Not Have Items In Cart Yet!");
		}
        
	});
	
	//get Category list
    var request2 = $.ajax({  
        url: "https://"+address+"/CSI5380/queryCategory.do",  
        type: "POST",  
        async: false,
        dataType: "json",  
        cache: false,  
        success: function (result, textStatus) {
          result=eval(result.categoryList);
          var decate="<li class='active grid'><a class='color1' href='index.html'>Home</a></li><li class='grid'><a class='color2 tm'>new arrivals</a></li>";
          $('.megamenu').append(decate);
          for(var i=0; i< result.length; i++) 
          {  
           j=i+1;
          	var category="<li class='grid'><a class='color"+(j+2)+" tm'>"+result[i].catename+"</a></li>";
           $('.megamenu').append(category);
          }
          $(".tm").unbind('click').bind('click',function(){
              var menu=$(this).text();
              if(menu=="new arrivals"){
            	  window.location.href="cdcatalog.html?content=&key=redate&menu=&title=new arrivals";
              }else if(menu=="Home"){
            	  window.location.href="index.html";
              }else{
            	  window.location.href="cdcatalog.html?content=&key=&menu="+menu;
              }
             
              //$.post("cdcatalog.html",{"menu": menu});
          });
        },
        error: function (XMLHttpRequest, textStatus, errorThrown) {
        	alert(errorThrown); }  
          
        }); 
	//getProductlist
	var request1 = $.ajax({  
    	url: "https://"+address+"/CSI5380/getProductlist.do",  
    	type: "POST",  
    	async: false,
    	data:_json,
    	dataType: "json",  
    	cache: false,  
    	success: function (result, textStatus) {
        	result=eval(result.cdList);
        	$(".subset1").children().remove();
        	for(i=0;i<result.length;i++){
        		j=i+1;
        		h=Math.floor(i/4)
        		l=j%4;
        		var item="<div class='grid1_of_4' id='"+result[i].cdid+"'><div class='content_box'><a name='images' class='pointer'><img src='"+result[i].imgurl+"' class='img-responsive'/></a><h4><a class='pointer' name='title'>"+result[i].title+"</a></h4><p>by "+result[i].artist+"</p><div class='grid_1 simpleCart_shelfItem'><div class='item_add'><span class='item_price'><h6>ONLY CAD$"+result[i].price+"</h6></span></div><div class='item_add'><span class='item_price'><a class='pointer cart' id='cart'>add to cart</a></span></div></div></div></div>";
        		if(h==0){
        			if(l==0){
        				$(".subset1").append(item+"<div class='clearfix'> </div>");	
        			}else{
        				$(".subset1").append(item);		
        			}
        		}else if(h==1){
        			if(l==0){
        				$(".subset2").append(item+"<div class='clearfix'> </div>");	
        			}else{
        				$(".subset2").append(item);		
        			}
        		}else if(h==2){
        			if(l==0){
        				$(".subset3").append(item+"<div class='clearfix'> </div>");	
        			}else{
        				$(".subset3").append(item);		
        			}
        		}
        		$("a[name='images']").bind('click',function(){
                    var cdid=$(this).parent().parent().attr("id");
                    window.location.href="details.html?cdid="+cdid;
                    //$.post("details.html",{"cdid": cdid});
            }); 
        		$("a[name='title']").bind('click',function(){
                    var cdid=$(this).parent().parent().parent().attr("id");
                    window.location.href="details.html?cdid="+cdid;
                    //$.post("details.html",{"cdid": cdid});
            });
        		$(".cart").unbind('click').bind('click',function(){
                    var cdid=$(this).parent().parent().parent().parent().parent().attr("id")
                    //add item to cookies/session
                    var aj=$.cookie('cart');
                    ajson=jQuery.param({"cdid": cdid,"quantity":1,"aj":aj});
                    var request = $.ajax({  
                        url: "https://"+address+"/CSI5380/addtocart.do",  
                        type: "POST",  
                        async: false,
                        data:ajson,
                        dataType: "json",  
                        cache: false,  
                        success: function (result, textStatus) {
                        	 $.cookie("cart", result.cookies, { expires: 7 });
                        	var cj=$.cookie('cart');
                     		var cjson= jQuery.param({"cjson": cj});
                     		var request3 = $.ajax({
                     	        url: "https://"+address+"/CSI5380/cookies.do",  
                     	        type: "POST",  
                     	        async: false,
                     	        data:cjson,
                     	        dataType: "json",  
                     	        cache: false,  
                     	        success: function (result, textStatus) {
                     	        	$("#simpleCart_total").text("$"+result.totalprice);
                     	        	$("#simpleCart_quantity").text(result.quantity);
                     	        	
                     	        },  
                     	        error: function (XMLHttpRequest, textStatus, errorThrown) {
                     	        	alert(errorThrown); }  
                     	    });
                        },  
                        error: function (XMLHttpRequest, textStatus, errorThrown) {
                        	alert(errorThrown); }  
                    });
            });
        		if(mtitle!=null){
        		$('#menutitle').text(mtitle+" - "+result.length+" items");	
        		}else{
        			$('#menutitle').text(menu+" - "+result.length+" items");	
        		}
        	}
        	
        	
       	 
    	}, 
    	
    	error: function (XMLHttpRequest, textStatus, errorThrown) {
        	alert(errorThrown); }  
	});
/**
	//get productlist order by sales
		$("a[name='popular']").bind('click',function(){
			url: "https://"+address+"/CSI5380/getProductlist.do",  
	    	type: "POST",  
	    	async: false,
	    	data:_json1,
	    	dataType: "json",  
	    	cache: false,  
	    	success: function (result, textStatus) {
	        	result=eval(result.cdList);
	        	$(".subset1").children().remove();
	        	for(i=0;i<=cdList.length;i++){
	        		j=i+1;
	        		h=parseInt(j/4);
	        		l=j%4;
	        		var item="<div class='grid1_of_4' id='"+result[i].cdid+"'><div class='content_box'><a name="images"><img src='"+result[i].imgurl+"' class='img-responsive'/></a><h4><a name="title">"+result[i].title+"</a></h4><p>by "+result[i].artist+"</p><div class='grid_1 simpleCart_shelfItem'><div class='item_add'><span class='item_price'><h6>ONLY CAD$"+result[i].price+"</h6></span></div><div class='item_add'><span class='item_price'><a id="cart">add to cart</a></span></div></div></div></div>";
	        		if(h==1){
	        			$(".subset1").append(item);		
	        		}else if(h==2){
	        			$(".subset2").append(item);
	        		}else if(h==3){
	        			$(".subset3").append(item);
	        		}
	        		//get detail of the product
	        		$("a[name='images']").unbind('click').bind('click',function(){
	                    var cdid=$(this).parent().parent().attr("id");
	                    //window.location.href="details.html?cdid="+cdid;
	                    $.post("details.html",{"cdid": cdid});
	            }); 
	        		//get detail of the product
	        		$("a[name='title']").unbind('click').bind('click',function(){
	                    var cdid=$(this).parent().parent().parent().attr("id");
	                    //window.location.href="details.html?cdid="+cdid;
	                    $.post("details.html",{"cdid": cdid});
	            });
	        		//get detail of the product
	        		$("#cart").unbind('click').bind('click',function(){
	                    var cdid=$(this).parent().parent().parent().parent().parent().parent().attr("id");
	                    //add item to cookies/session
	                    $.post("https://"+address+"/CSI5380/addtocart.do",{"cdid": cdid,"quantity":1});
	                    
	            });
	       	 
	    	},  
	    	error: function (XMLHttpRequest, textStatus, errorThrown) {
	        	alert(errorThrown); }  
		});
		
		
		//get productlist order by released date
		$("a[name='new']").bind('click',function(){
			url: "https://"+address+"/CSI5380/getProductlist.do",  
	    	type: "POST",  
	    	async: false,
	    	data:_json2
	    	dataType: "json",  
	    	cache: false,  
	    	success: function (result, textStatus) {
	        	result=eval(result.cdList);
	        	$(".subset1").children().remove();
	        	for(i=0;i<=cdList.length;i++){
	        		j=i+1;
	        		h=parseInt(j/4);
	        		l=j%4;
	        		var item="<div class='grid1_of_4' id='"+result[i].cdid+"'><div class='content_box'><a name="images"><img src='"+result[i].imgurl+"' class='img-responsive'/></a><h4><a name="title">"+result[i].title+"</a></h4><p>by "+result[i].artist+"</p><div class='grid_1 simpleCart_shelfItem'><div class='item_add'><span class='item_price'><h6>ONLY CAD$"+result[i].price+"</h6></span></div><div class='item_add'><span class='item_price'><a id="cart">add to cart</a></span></div></div></div></div>";
	        		if(h==1){
	        			$(".subset1").append(item);		
	        		}else if(h==2){
	        			$(".subset2").append(item);
	        		}else if(h==3){
	        			$(".subset3").append(item);
	        		}
	        		//get detail of the product
	        		$("a[name='images']").unbind('click').bind('click',function(){
	                    var cdid=$(this).parent().parent().attr("id");
	                    //window.location.href="details.html?cdid="+cdid;
	                    $.post("details.html",{"cdid": cdid});
	            }); 
	        		//get detail of the product
	        		$("a[name='title']").unbind('click').bind('click',function(){
	                    var cdid=$(this).parent().parent().parent().attr("id");
	                    //window.location.href="details.html?cdid="+cdid;
	                    $.post("details.html",{"cdid": cdid});
	            });
	        		//get detail of the product
	        		$("#cart").bind('click',function(){
	                    var cdid=$(this).parent().parent().parent().parent().parent().parent().attr("id");
	                  //add item to cookies/session
	                    $.post("https://"+address+"/CSI5380/addtocart.do",{"cdid": cdid,"quantity":1});
	            });
	       	 
	    	},  
	    	error: function (XMLHttpRequest, textStatus, errorThrown) {
	        	alert(errorThrown); }  
		});
		//get productlist order by promotion
		$("a[name='dicount']").bind('click',function(){
			url: "https://"+address+"/CSI5380/getProductlist.do",  
	    	type: "POST",  
	    	async: false,
	    	data:_json3
	    	dataType: "json",  
	    	cache: false,  
	    	success: function (result, textStatus) {
	        	result=eval(result.cdList);
	        	$(".subset1").children().remove();
	        	for(i=0;i<=cdList.length;i++){
	        		j=i+1;
	        		h=parseInt(j/4);
	        		l=j%4;
	        		var item="<div class='grid1_of_4' id='"+result[i].cdid+"'><div class='content_box'><a name="images"><img src='"+result[i].imgurl+"' class='img-responsive'/></a><h4><a name="title">"+result[i].title+"</a></h4><p>by "+result[i].artist+"</p><div class='grid_1 simpleCart_shelfItem'><div class='item_add'><span class='item_price'><h6>ONLY CAD$"+result[i].price+"</h6></span></div><div class='item_add'><span class='item_price'><a id="cart">add to cart</a></span></div></div></div></div>";
	        		if(h==1){
	        			$(".subset1").append(item);		
	        		}else if(h==2){
	        			$(".subset2").append(item);
	        		}else if(h==3){
	        			$(".subset3").append(item);
	        		}
	        		//get detail of the product
	        		$("a[name='images']").unbind('click').bind('click',function(){
	                    var cdid=$(this).parent().parent().attr("id");
	                    //window.location.href="details.html?cdid="+cdid;
	                    $.post("details.html",{"cdid": cdid});
	            }); 
	        		//get detail of the product
	        		$("a[name='title']").unbind('click').bind('click',function(){
	                    var cdid=$(this).parent().parent().parent().attr("id");
	                    //window.location.href="details.html?cdid="+cdid;
	                     $.post("details.html",{"cdid": cdid});
	            });
	        		//get detail of the product
	        		$("#cart").unbind('click').bind('click',function(){
	                    var cdid=$(this).parent().parent().parent().parent().parent().parent().attr("id");
	                  //add item to cookies/session
	                    $.post("https://"+address+"/CSI5380/addtocart.do",{"cdid": cdid,"quantity":1});
	            });
	       	 
	    	},  
	    	error: function (XMLHttpRequest, textStatus, errorThrown) {
	        	alert(errorThrown); }  
		});
		//get productlist order by price
		$("a[name='price']").bind('click',function(){
			url: "https://"+address+"/CSI5380/getProductlist.do",  
	    	type: "POST",  
	    	async: false,
	    	data:_json4
	    	dataType: "json",  
	    	cache: false,  
	    	success: function (result, textStatus) {
	        	result=eval(result.cdList);
	        	$(".subset1").children().remove();
	        	for(i=0;i<=cdList.length;i++){
	        		j=i+1;
	        		h=parseInt(j/4);
	        		l=j%4;
	        		var item="<div class='grid1_of_4' id='"+result[i].cdid+"'><div class='content_box'><a name="images"><img src='"+result[i].imgurl+"' class='img-responsive'/></a><h4><a name="title">"+result[i].title+"</a></h4><p>by "+result[i].artist+"</p><div class='grid_1 simpleCart_shelfItem'><div class='item_add'><span class='item_price'><h6>ONLY CAD$"+result[i].price+"</h6></span></div><div class='item_add'><span class='item_price'><a id="cart">add to cart</a></span></div></div></div></div>";
	        		if(h==1){
	        			$(".subset1").append(item);		
	        		}else if(h==2){
	        			$(".subset2").append(item);
	        		}else if(h==3){
	        			$(".subset3").append(item);
	        		}
	        		//get detail of the product
	        		$("a[name='images']").unbind('click').bind('click',function(){
	                    var cdid=$(this).parent().parent().attr("id");
	                    //window.location.href="details.html?cdid="+cdid;
	                    $.post("details.html",{"cdid": cdid});
	            }); 
	        		//get detail of the product
	        		$("a[name='title']").unbind('click').bind('click',function(){
	                    var cdid=$(this).parent().parent().parent().attr("id");
	                    //window.location.href="details.html?cdid="+cdid;
	                    $.post("details.html",{"cdid": cdid});
	            });
	        		//get detail of the product
	        		$("#cart").unbind('click').bind('click',function(){
	                    var cdid=$(this).parent().parent().parent().parent().parent().parent().attr("id");
	                  //add item to cookies/session
	                    $.post("https://"+address+"/CSI5380/addtocart.do",{"cdid": cdid,"quantity":1});
	            });
	       	 
	    	},  
	    	error: function (XMLHttpRequest, textStatus, errorThrown) {
	        	alert(errorThrown); }  
		});
		
**/
		//search product by key words
		$("#search").click(function(){
	        var content=$("#content").val();
	        window.location.href="cdcatalog.html?content="+content+"&key=&menu="+menu+"&title="+content;
	        //$.post("cdcatalog.html",{"menu": menu,"content": content,"title":content});
	});
		
		
		
		
	
});


</script>
</head>
<body>
<!-- header_top -->
<div class="top_bg">
	<div class="container">
		<div class="header_top">
			<div class="top_right">
				<ul>
				<!--link help page,introduction of the site-->
					<li><a href="#">help</a></li>|
				<!--link contact page,introduction of contact information-->
					<li><a href="contact.html">Contact</a></li>|
				<!--link delivery page,delivery informatin--> 
					<li><a href="#">Delivery information</a></li>
				</ul>
			</div>
			<div class="top_left">
				<h2><span></span> Call us : 613 8888 888</h2>
			</div>
				<div class="clearfix"> </div>
		</div>
	</div>
</div>

<!-- header -->
<div class="header_bg">
<div class="container">
	<div class="header">
	<div class="head-t">
		<div class="logo">
			<a href="index.html"><img src="images/logo.png" class="img-responsive" alt=""/> </a>
		</div>
		<!-- start header_right -->
		<div class="header_right">
			<div class="rgt-bottom">
				<div class="log">
					<div class="login" >
					<!-- loginform defaultly hidden,while click "loginButton",it shows.(menu_jquery.js)-->
						<div id="loginContainer"><a href="#" id="loginButton"><span>Login</span></a>
						    <div id="loginBox">                
						        <div id="loginForm">
						                <fieldset id="body">
						                	<fieldset>
						                        <label for="email">Email Address</label>
						                        <input type="text" name="email" id="email">
						                    </fieldset>
						                    <fieldset>
						                        <label for="password">Password</label>
						                        <input type="password" name="password" id="password">
						                    </fieldset>
										    <fieldset>
												<label for="checkbox"><input type="checkbox" id="checkbox"> <i>Remember me</i></label>
											</fieldset>
						                    <input type="submit" id="login" value="Sign in"><label><a href="register.html">Register</a></label></span>
						            	</fieldset>
						            <span><a href="#">Forgot your password?</a></span>
								</div>
							</div>
						</div>
					</div>
				</div>
				<div class="cart box_1">
					<a name="checkout" class="checka">
						<h3> <span id="simpleCart_total" class="simpleCart_total"></span> (<span id="simpleCart_quantity" class="simpleCart_quantity"></span> items)<img src="images/bag.png" alt=""></h3>
					</a>	
					<div class="clearfix"> </div>
				</div>
				<div class="clearfix"> </div>
			</div>
			<div class="search">
				
					<input id="content" type="text" value="" placeholder="search...">
					<input id="search" type="submit" value="">
				
			</div>
			<div class="clearfix"> </div>
		</div>
		<div class="clearfix"> </div>
	</div>
		<!-- start header menu -->
	<ul class="megamenu skyblue">
	</ul> 
</div>
</div>

<!-- content -->
<div class="container">
<div class="cd_main">
	<!-- start content -->
	<div class="col-md-9 cd_content">
		<div class="cd">
			<a><h4 id="menutitle" style="text-transform: capitalize;"><span></span> </h4></a>
			<ul class="w_nav">
						<li>Sort : </li>
		     			<li><a name="popular" class="active">popular</a></li> |
		     			<li><a name="new">new </a></li> |
		     			<li><a name="discount">discount</a></li> |
		     			<li><a name="price">price: Low High </a></li> 
		     			<div class="clear"></div>	
		     </ul>
		     <div class="clearfix"></div>	
		</div>
		<!-- grids_of_4 -->
		<div class="grids_of_4 subset1">
		</div>
		
		 
		<div class="grids_of_4 subset2">
		</div>
		 
		
		<div class="grids_of_4 subset3">
		</div>
		<!-- end grids_of_4 -->
		
		
	</div>
	<div class="clearfix"></div>
	
	<!-- end content -->
</div>
</div>
<div class="foot-top">
	<div class="container">
		<div class="col-md-6 s-c">
			<li>
				<div class="fooll">
					<h5>follow us on</h5>
				</div>
			</li>
			<li>
				<div class="social-ic">
					<ul>
						<li><a href="#"><i class="facebok"> </i></a></li>
						<li><a href="#"><i class="twiter"> </i></a></li>
						<li><a href="#"><i class="goog"> </i></a></li>
						<li><a href="#"><i class="be"> </i></a></li>
						<li><a href="#"><i class="pp"> </i></a></li>
							<div class="clearfix"></div>	
					</ul>
				</div>
			</li>
				<div class="clearfix"> </div>
		</div>
	</div>
</div>
<div class="footer">
	<div class="container">
		<div class="col-md-3 cust">
			<h4>CUSTOMER CARE</h4>
				<li><a href="#">Help Center</a></li>
				<li><a href="#">FAQ</a></li>
				<li><a href="buy.html">How To Buy</a></li>
				<li><a href="#">Delivery</a></li>
		</div>
		<div class="col-md-2 abt">
			<h4>ABOUT US</h4>
				<li><a href="#">Our Stories</a></li>
				<li><a href="contact.html">Contact</a></li>
		</div>
		<div class="col-md-2 myac">
			<h4>MY ACCOUNT</h4>
				<li><a href="register.html">Register</a></li>
				<li><a href="#">My Cart</a></li>
				<li><a href="#">Order History</a></li>
				<li><a href="buy.html">Payment</a></li>
		</div>
		<div class="col-md-5 our-st">
				<h4>OUR STORES</h4>
			<div class="clearfix"> </div>
				<li><i class="add"> </i>1233 Colonel By Drive</li>
				<li><i class="phone"> </i>613-8888888</li>
				<li><a href="mailto:info@example.com"><i class="mail"> </i>info@carleton.com </a></li>
			
		</div>
		<div class="clearfix"> </div>
			<p>Copyrights © 2015 King of Lab. All rights reserved</p>
	</div>
</div>
</body>
</html>